;(self.SPZ=self.SPZ||[]).push({n:"spz-odometer",ev:"0.1",l:!0,v:"1.0",m:0,f:function(t,e){!function(){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=["<span class=odometer-formatting-mark></span>"],n=["<span class=odometer-digit><span class=odometer-digit-spacer>8</span><span class=odometer-digit-inner><span class=odometer-ribbon><span class=odometer-ribbon-inner><span class=odometer-value></span></span></span></span></span>"];function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function r(t,i){return!i||"object"!==e(i)&&"function"!=typeof i?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):i}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var a="spz-odometer",u=/^\(?([^)]*)\)?(?:(.)(d+))?$/,d="odometer-animating-up",l="odometer-animating-down",h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(m,t);var e,h,f,c=(h=m,f=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=s(h);if(f){var i=s(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return r(this,t)});function m(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,m),(e=c.call(this,t)).startValue_=0,e.endValue_=0,e.duration_=2e3,e.format_="(,ddd).d",e}return(e=[{key:"buildCallback",value:function(){var t=this;this.assert(this.element.hasAttribute("start-value")||this.element.hasAttribute("end-value"),'"start-value" or "end-value" attribute required.%s',a),this.element.hasAttribute("start-value")&&(this.startValue_=this.cleanValue_(this.element.getAttribute("start-value"))),this.element.hasAttribute("end-value")&&(this.endValue_=this.cleanValue_(this.element.getAttribute("end-value"))),this.element.hasAttribute("duration")&&(this.duration_=Number(this.element.getAttribute("duration"))),this.element.hasAttribute("format")&&(this.format_=this.element.getAttribute("format")),this.digits_=[],this.formatList_=[],this.maxValues=this.duration_/33.333333333333336/2|0,this.getSpzDoc().whenFirstVisible().then((function(){t.init_()}))}},{key:"init_",value:function(){this.initAnimateDirection_(),this.initTransitionEvent_(),this.render_()}},{key:"render_",value:function(){for(var t=this,e=[],i=this.getOdometerFrame_(),n=i.digits,o=i.frames,r=0;r<n.length;++r){o=n[r],this.digits_[r]||this.addDigit_(" ",r),e[r]||(e[r]=SPZCore.Dom.scopedQuerySelector(this.digits_[r],".odometer-ribbon-inner")),e[r].innerHTML="";for(var s=0;s<o.length;++s){var a=document.createElement("div");a.className="odometer-value",a.innerHTML=o[s],e[r].appendChild(a),s===o.length-1&&(a.classList.add("odometer-last-value"),this.formatList_.push(o[s])),0===s&&a.classList.add("odometer-first-value")}}this.initData_<1&&(this.addSpacer_("."),this.addSpacer_("0")),SPZServices.timerFor(this.win).delay((function(){t.setRunningStatus_(!0)}),100)}},{key:"getOdometerFrame_",value:function(){for(var t=this.getDigitCount_(),e=[],i=[],n=0,o=0;o<t;++o){var r=this.getIndex_(o,t),s=r.end,a=r.start,u=s-a;if(Math.abs(u)>this.maxValues){i=[];for(var d=u/(this.maxValues*(1+n)),l=a;u>0&&l<s||u<0&&l>s;)i.push(Math.round(l)),l+=d;i[i.length-1]!==s&&i.push(s),n++}else{i=[];for(var h=a;a<=s?h<=s:h>=s;a<=s?h++:h--)i.push(h)}for(var f=0;f<i.length;++f)i[f]=Math.abs(i[f]%10);e.push(i)}return e.reverse(),{digits:e,frames:i}}},{key:"addDigit_",value:function(t,e){var i=!1;for(this.radixList_.length>1&&e===this.radixList_[1].length&&(i=!0,this.addSpacer_("."));!i;){var n;null!==(n=this.repeating_)&&void 0!==n&&n.length||this.resetFormat_();var o=this.repeating_[this.repeating_.length-1];if(this.repeating_=this.repeating_.substring(0,this.repeating_.length-1),"d"===o)break;this.addSpacer_(o)}var r=this.createDigitHtml_();r.querySelector(".odometer-value").innerHTML=t,this.digits_.push(r),this.insertDigit_(r)}},{key:"addSpacer_",value:function(t){var e=SPZCore.Dom.htmlFor(this.element)(i);e.innerHTML=t,this.insertDigit_(e),this.formatList_.push(t)}},{key:"insertDigit_",value:function(t){this.element.children.length?this.element.insertBefore(t,this.element.children[0]):this.element.appendChild(t)}},{key:"createDigitHtml_",value:function(){return SPZCore.Dom.htmlFor(this.element)(n)}},{key:"initTransitionEvent_",value:function(){var t=this;"transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd".split(" ").forEach((function(e){t.element.addEventListener(e,(function(){SPZServices.timerFor(t.win).delay((function(){t.reset_()}),0)}),!1)}))}},{key:"reset_",value:function(){this.element.innerHTML=this.initData_<1?this.initData_:this.formatList_.reverse().join(""),SPZCore.Dom.toggleAttribute(this.element,d,!1),SPZCore.Dom.toggleAttribute(this.element,l,!1),this.setRunningStatus_(!1)}},{key:"resetFormat_",value:function(){var t=u.exec(this.format_);this.repeating_=t.slice(1,4)[0]}},{key:"getIndex_",value:function(t,e){var i=Math.pow(10,e-t-1);return{start:Math.floor(this.startValue_/i),end:Math.floor(this.endValue_/i)}}},{key:"getDigitCount_",value:function(){return Math.max(Math.max(this.startValue_,this.endValue_).toString().length,this.radixList_.length)}},{key:"cleanValue_",value:function(t){return t?(this.radixList_=t.split("."),this.initData_=parseFloat(t),parseFloat(t.replace(".",""))):0}},{key:"initAnimateDirection_",value:function(){var t=this.endValue_-this.startValue_;SPZCore.Dom.toggleAttribute(this.element,d,t),SPZCore.Dom.toggleAttribute(this.element,l,!t)}},{key:"setRunningStatus_",value:function(t){SPZCore.Dom.toggleAttribute(this.element,"odometer-animating-running",t),SPZCore.Dom.toggleAttribute(this.element,"odometer-animating-finish",!t)}},{key:"isLayoutSupported",value:function(){return!0}}])&&function(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(m.prototype,e),m}(t.BaseElement);self.SPZ.registerElement(a,h,"spz-odometer{vertical-align:middle}spz-odometer,spz-odometer .odometer-digit{display:inline-block;position:relative}spz-odometer .odometer-digit .odometer-digit-spacer{display:inline-block;visibility:hidden}spz-odometer .odometer-digit .odometer-digit-inner{text-align:left;display:block;position:absolute;top:0;left:0;right:0;bottom:0;overflow:hidden}spz-odometer .odometer-digit .odometer-ribbon{display:block}spz-odometer .odometer-digit .odometer-ribbon-inner{display:block;-webkit-backface-visibility:hidden}spz-odometer .odometer-digit .odometer-value{display:block;-webkit-transform:translateZ(0)}spz-odometer .odometer-digit .odometer-value.odometer-last-value{position:absolute}spz-odometer[odometer-animating-up] .odometer-ribbon-inner{transition:transform 2s}spz-odometer[odometer-animating-down] .odometer-ribbon-inner,spz-odometer[odometer-animating-up][odometer-animating-running] .odometer-ribbon-inner{transform:translateY(-100%)}spz-odometer[odometer-animating-down][odometer-animating-running] .odometer-ribbon-inner{transition:transform 2s;transform:translateY(0)}spz-odometer .odometer-value{text-align:center}\n/*# sourceURL=/extensions/spz-odometer/0.1/spz-odometer.css*/")}()}});